<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Universal Forecasting Tool — v2</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<style>
body{background:#0b1120;color:#e5e7eb;margin:0;font-family:system-ui}
.page{max-width:1400px;margin:auto;padding:20px}
.hidden{display:none}
button{cursor:pointer}

.toggle-container{display:flex;gap:8px;justify-content:flex-end}
.toggle-button{padding:6px 14px;border-radius:18px;border:1px solid #38bdf8;background:none;color:#38bdf8}
.toggle-button.active{background:#38bdf8;color:#0b1120;font-weight:700}

input[type=file]{background:#020617;color:#e5e7eb;border:1px solid #1f2937;padding:6px;border-radius:6px}

.snap-container{height:75vh;overflow-y:auto;scroll-snap-type:y mandatory}
.card{background:#111827;border-radius:12px;padding:16px;margin-bottom:16px;scroll-snap-align:start;border-left:6px solid #374151}
.card-A{border-left-color:#22c55e}
.card-B{border-left-color:#facc15}
.card-C{border-left-color:#64748b}

.card-title{font-size:18px;font-weight:700}
.card-desc{color:#9ca3af;font-size:14px;margin-top:2px}
.card-body{margin-top:10px;line-height:1.45}
.card-footer{margin-top:10px;border-top:1px solid #1f2937;padding-top:8px;font-weight:600}

.inline-edit{background:#020617;border:1px solid #374151;color:#e5e7eb;border-radius:4px;padding:4px}

.about{max-width:900px;line-height:1.6}
.about h3{margin-top:24px}
.muted{color:#9ca3af}

/* Planning window */
.plan-window{display:flex;gap:6px;margin:10px 0}
.plan-btn{padding:4px 10px;border-radius:14px;border:1px solid #334155;background:none;color:#cbd5f5}
.plan-btn.active{background:#334155;font-weight:700}

/* Validation */
.validation{margin-top:10px;padding:10px;border:1px solid #1f2937;border-radius:8px;background:#020617}
</style>
</head>

<body>
<div class="page">

<!-- MODE TOGGLE -->
<div class="toggle-container">
  <button id="btn-analyst" class="toggle-button active">Analyst</button>
  <button id="btn-management" class="toggle-button">Management</button>
  <button id="btn-about" class="toggle-button">About</button>
</div>

<!-- FILE INPUTS -->
<div style="margin:10px 0">
  <div>
    <strong>Cycle Count CSV (required)</strong><br>
    <input id="cycle-file" type="file" accept=".csv">
  </div>
  <div style="margin-top:6px">
    <strong>Purchase History CSV (optional)</strong><br>
    <input id="po-file" type="file" accept=".csv">
  </div>
</div>

<!-- PLANNING WINDOW -->
<div class="plan-window">
  <span class="muted">Planning window:</span>
  <button id="btn-win-30" class="plan-btn">30d</button>
  <button id="btn-win-60" class="plan-btn">60d</button>
  <button id="btn-win-90" class="plan-btn active">90d</button>
</div>

<!-- ANALYST -->
<div id="analyst-view">
  <table width="100%" cellspacing="0">
    <thead>
      <tr>
        <th>SKU</th>
        <th>Class</th>
        <th>Avg / WD</th>
        <th>30d</th>
        <th>60d</th>
        <th>90d</th>
      </tr>
    </thead>
    <tbody id="analyst-body"></tbody>
  </table>
</div>

<!-- MANAGEMENT -->
<div id="management-view" class="hidden">
  <div class="snap-container" id="rolodex"></div>
</div>

<!-- VALIDATION -->
<div id="validation-summary" class="validation muted"></div>

<!-- ABOUT -->
<div id="about-view" class="hidden about">
  <h2>Universal Forecasting Tool — Version 2</h2>

  <h3>What problem this solves</h3>
  <p>
    Most inventory tools mix demand and supply. This tool keeps them separate
    so decisions are based on real consumption, not receipts.
  </p>

  <h3>What data is used</h3>
  <ul>
    <li>Cycle counts to calculate demand</li>
    <li>Purchase history to understand supply and lead time</li>
  </ul>

  <h3>Planning horizon</h3>
  <p>
    Internally the model plans in working days and weeks for accuracy.
    Externally it presents a <strong>0–24 month horizon</strong>,
    which is how planners communicate with management.
  </p>

  <p class="muted">
    Version 2 extends Version 1 without removing any demand logic.
  </p>
</div>

</div>

<script src="main.js"></script>

<script>
/* Planning window buttons */
document.getElementById("btn-win-30").onclick=()=>setPlanningWindow(30)
document.getElementById("btn-win-60").onclick=()=>setPlanningWindow(60)
document.getElementById("btn-win-90").onclick=()=>setPlanningWindow(90)
</script>

</body>
</html>
